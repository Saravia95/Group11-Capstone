# ðŸŽµ JukeVibes - Server

This project is the backend for the JukeVibes, an innovative web-based music system that allows customers to browse, request, and play songs via QR codes. The system is designed to enhance customer experience in venues such as restaurants and cafes by offering a seamless digital jukebox experience.

## Getting Started

- Environment Variables (_If you don't know how to get these, click [here](https://www.notion.so/How-to-Retrieve-Environment-Variables-in-Supabase-185ed17340298079bb1cf9b2f1e5c637?pvs=4)_)

```
SUPABASE_URL=       //The API gateway for your Supabase project
SUPABASE_ANON_KEY=  //The anon key for your Supabase API
DATABASE_URL=       //PostgreSQL connection string
DIRECT_URL=         //Direct PostgreSQL connection string
SPOTIFY_CLIENT_ID=  //Your Spotify Client ID
SPOTIFY_CLIENT_SECRET= //Your Spotify Client Secret
```

### Spotify API Setup

1. Go to [Spotify Developer Dashboard](https://developer.spotify.com/dashboard)
2. Log in with your Spotify account
3. Click "Create App"
4. Fill in the app details:
   - App name: Your app name (e.g., "JukeVibes")
   - App description: Brief description of your app
   - Redirect URI: http://localhost:5173/callback (for development)
5. Once created, you'll get:
   - Client ID
   - Client Secret (click "Show Client Secret")
6. Add these credentials to your `.env` file

For more details about Spotify Web API, visit:

- [Spotify Web API Documentation](https://developer.spotify.com/documentation/web-api)
- [Authorization Guide](https://developer.spotify.com/documentation/web-api/concepts/authorization)
- [Spotify Web API Node](https://github.com/thelinmichael/spotify-web-api-node)

- Install dependencies

```
npm install
```

- Sync database schema

```
npx prisma generate
npx prisma db push
```

- Build and run the project

```
npm run build
npm run start
```

- Setup Google OAuth

The Supabase Docs have good instructions on how to configure it, so please refer to this link: [Login with Google](https://supabase.com/docs/guides/auth/social-login/auth-google?queryGroups=platform&platform=web&queryGroups=environment&environment=server&queryGroups=framework&framework=express)

## Folder Structure

```
server/
â”œâ”€â”€ dist/               # Compiled output files generated by TypeScript (after build command)
â”œâ”€â”€ prisma/             # Database schema definitions and migrations managed by Prisma
â”œâ”€â”€ src/                # Main source code of the backend application
â”‚   â”œâ”€â”€ config/         # Configuration files
â”‚   â”œâ”€â”€ controllers/    # Business logic to handle requests and responses (handling routes)
â”‚   â”œâ”€â”€ routes/         # Route definitions that map endpoints to controllers
â”‚   â”œâ”€â”€ services/       # Service layer that contains business logic and database interactions
â”‚   â”œâ”€â”€ types/          # TypeScript type definitions for request, response, and database models
â”‚   â””â”€â”€ index.ts        # Main entry point to initialize and start the Express.js server
â”œâ”€â”€ .prettierrc         # Prettier configuration for code formatting rules
â”œâ”€â”€ tsconfig.json       # TypeScript configuration file to define compiler options
â”œâ”€â”€ package.json        # Project dependencies, scripts, and metadata
â””â”€â”€ README.md
```

## API Features

- **Song Search**: Search songs using Spotify API
  - By title
  - By artist
  - Returns song details including cover image, title, artist, and duration
